<%- include('header')%>
    <main class="container mt-4">
        <h1>Write a Review for <%= book.title %></h1>
        <div class="book-info mb-4">
            <h4>By <%= book.author %></h4>
            <p><%= book.description ? book.description.substring(0, 150) + (book.description.length > 150 ? '...' : '') : 'No description available' %></p>
        </div>
        
        <% if (typeof error !== 'undefined') { %>
            <div class="alert alert-danger" role="alert">
                <%= error %>
                <div class="mt-2">
                    <a href="/browse/<%= book._id %>" class="btn btn-primary">Back to Book</a>
                </div>
            </div>
        <% } else { %>
            <form action="/write_review/<%= book._id %>" method="POST">
                <div class="form-group">
                    <label for="reviewContent">Your Review</label>
                    <textarea class="form-control" id="reviewContent" name="reviewContent" rows="5" placeholder="Write your review here" required></textarea>
                </div>
                <div class="form-group">
                    <label for="reviewRating">Rating</label>
                    <select class="form-control" id="reviewRating" name="reviewRating" required>
                        <option value="">Select a rating...</option>
                        <option value="1">1 - Poor</option>
                        <option value="2">2 - Fair</option>
                        <option value="3">3 - Good</option>
                        <option value="4">4 - Very Good</option>
                        <option value="5">5 - Excellent</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Submit Review</button>
                <a href="/browse/<%= book._id %>" class="btn btn-secondary">Cancel</a>
            </form>
        <% } %>
    </main>
    <%- include('footer')%>